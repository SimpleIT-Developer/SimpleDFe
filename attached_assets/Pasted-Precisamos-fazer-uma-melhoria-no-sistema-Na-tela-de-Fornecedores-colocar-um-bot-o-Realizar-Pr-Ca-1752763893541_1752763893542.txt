Precisamos fazer uma melhoria no sistema
Na tela de Fornecedores, colocar um botão "Realizar Pré Cadastro no ERP"
Clicando nesse botão, o sistema vai consultar os dados do CNPJ do registro em questão

na API https://www.receitaws.com.br/v1/cnpj/22104617000190

onde "22104617000190" é o CNPJ do Fornecedor em questão

Com os dados retornados temos que fazer uma requisição SOAP no endereço
https://legiaoda142257.rm.cloudtotvs.com.br:2201/wsDataServer/IwsDataSer

Com essa requisição

<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tot="http://www.totvs.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <tot:SaveRecord>
         <!--Optional:-->
         <tot:DataServerName>FinCFODataBr</tot:DataServerName>
         <!--Optional:-->
         <tot:XML><![CDATA[<FinCFOBR >
  <FCFO>
    <CODEXTERNO>00000000</CODEXTERNO>
    <CODCOLIGADA>1</CODCOLIGADA>
    <CODCFO>-1</CODCFO>
    <NOMEFANTASIA>**NOME DO FORNECEDOR **</NOMEFANTASIA>
    <NOME>**NOME DO FORNECEDOR **</NOME>
    <CGCCFO>**CNPJ DO FORNECEDOR**</CGCCFO>
    <PAGREC>2</PAGREC>
    <RUA>**LOGRADOURO DO FORNECEDOR**</RUA>
    <NUMERO>**NUMERO DO ENDEREÇO DO FORNECEDOR**</NUMERO>
    <BAIRRO>**BAIRRO DO ENDEREÇO DO FORNECEDOR**</BAIRRO>
    <CIDADE>**CIDADE DO ENDEREÇO DO FORNECEDOR**</CIDADE>
    <CODETD>**ESTADO DO ENDEREÇO DO FORNECEDOR**</CODETD>
    <CEP>**CEP DO ENDEREÇO DO FORNECEDOR**</CEP>
    <TELEFONE>**TELEFONE DO ENDEREÇO DO FORNECEDOR**</TELEFONE>
    <EMAIL>**EMAIL DO ENDEREÇO DO FORNECEDOR**</EMAIL>
    <CONTATO>**CONTATO DO ENDEREÇO DO FORNECEDOR**</CONTATO>
    <ATIVO>1</ATIVO>
    <LIMITECREDITO>0</LIMITECREDITO>
    <DATAULTALTERACAO>**DATA ATUAL**</DATAULTALTERACAO>
    <DATACRIACAO>**DATA ATUAL**</DATACRIACAO>
    <DATAULTMOVIMENTO>**DATA ATUAL**</DATAULTMOVIMENTO>
    <VALOROP1>0</VALOROP1>
    <VALOROP2>0</VALOROP2>
    <VALOROP3>0</VALOROP3>
    <PATRIMONIO>0</PATRIMONIO>
    <NUMFUNCIONARIOS>0</NUMFUNCIONARIOS>
    <CODMUNICIPIO>**CODIGO DO MUNICIPIO DO FORNECEDOR**</CODMUNICIPIO>
    <INSCRMUNICIPAL>**INSCRICAO MUNICIPAL DO FORNECEDOR**</INSCRMUNICIPAL>
    <PESSOAFISOUJUR>J</PESSOAFISOUJUR>
    <PAIS>BRASIL</PAIS>
    <CONTRIBUINTE>0</CONTRIBUINTE>
    <CFOIMOB>0</CFOIMOB>
    <VALFRETE>0</VALFRETE>
    <TPTOMADOR>0</TPTOMADOR>
    <CONTRIBUINTEISS>0</CONTRIBUINTEISS>
    <NUMDEPENDENTES>0</NUMDEPENDENTES>
    <USUARIOALTERACAO>MARILDA</USUARIOALTERACAO>
    <ORGAOPUBLICO>0</ORGAOPUBLICO>
    <IDCFO></IDCFO>
    <VROUTRASDEDUCOESIRRF>0</VROUTRASDEDUCOESIRRF>
    <CODRECEITA>0000</CODRECEITA>
    <RAMOATIV>4</RAMOATIV>
    <OPTANTEPELOSIMPLES>1</OPTANTEPELOSIMPLES>
    <TIPORUA>1</TIPORUA>
    <TIPOBAIRRO>14</TIPOBAIRRO>
    <REGIMEISS>N</REGIMEISS>
    <RETENCAOISS>0</RETENCAOISS>
    <USUARIOCRIACAO>srvtotvsautboffice</USUARIOCRIACAO>
    <PORTE>3</PORTE>
    <TIPOOPCOMBUSTIVEL>3</TIPOOPCOMBUSTIVEL>
    <IDPAIS>1</IDPAIS>
    <NACIONALIDADE>0</NACIONALIDADE>
    <CALCULAAVP>0</CALCULAAVP>
    <RECCREATEDBY>srvtotvsautboffice</RECCREATEDBY>
    <RECCREATEDON>**DATA ATUAL**</RECCREATEDON>
    <RECMODIFIEDBY>srvtotvsautboffice</RECMODIFIEDBY>
    <RECMODIFIEDON>**DATA ATUAL**</RECMODIFIEDON>
    <TIPORENDIMENTO>000</TIPORENDIMENTO>
    <FORMATRIBUTACAO>00</FORMATRIBUTACAO>
    <SITUACAONIF>0</SITUACAONIF>
    <ISTOTVSMESSAGE>0</ISTOTVSMESSAGE>
    <INOVAR_AUTO>0</INOVAR_AUTO>
    <APLICFORMULA>F</APLICFORMULA>
    <CODCFOCOLINTEGRACAO>0</CODCFOCOLINTEGRACAO>
    <DIGVERIFICDEBAUTOMATICO>1</DIGVERIFICDEBAUTOMATICO>
    <ENTIDADEEXECUTORAPAA>0</ENTIDADEEXECUTORAPAA>
    <APOSENTADOOUPENSIONISTA>0</APOSENTADOOUPENSIONISTA>
    <SOCIOCOOPERADO>0</SOCIOCOOPERADO>
  </FCFO>
  <FCFOCOMPL>
    <CODCOLIGADA>1</CODCOLIGADA>
    <CODCFO>-1</CODCFO>
    <NAOUSARCALCSIMPIRPF>NUNCA</NAOUSARCALCSIMPIRPF>
  </FCFOCOMPL>
</FinCFOBR>]]></tot:XML>
         <!--Optional:-->
         <tot:Contexto>CODCOLIGADA=1;CODUSUARIO='mfavoreto';CODSISTEMA=F</tot:Contexto>
      </tot:SaveRecord>
   </soapenv:Body>
</soapenv:Envelope>

trocando os dados que estão entre ** ** pelos dados corretos que estão no JSON retornado pela API.

A Requisição deve ser realizada com a autenticação BASIC com o usuário mfavoreto e senha "@n@R@quel110987"

Esses endereços de requisição SOAP, usuário e senha devem ficar em um arquivo que seja fácil manutenção caso precise alterar.
